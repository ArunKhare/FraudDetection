<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>fraudDetection.pipeline.pipeline &mdash; Fraud-Detection beta:v1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=92fd9be5" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=eafc0fe6" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=e630dfc1"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Fraud-Detection
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">FraudDetection</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../considerations.html">Considerations</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Fraud-Detection</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">fraudDetection.pipeline.pipeline</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for fraudDetection.pipeline.pipeline</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module defines a threaded training pipeline for the Fraud Detection System. It integrates various components, including data ingestion, validation, transformation, model training, evaluation, and pushing. The pipeline is configured using the ConfigurationManager class, and the experiment details are recorded and saved.</span>

<span class="sd">Module Components:</span>
<span class="sd">    - Pipeline: Class representing the threaded experiment pipeline.</span>
<span class="sd">    - ConfigurationManager: Class for managing configuration settings.</span>
<span class="sd">    - DataIngestion, DataValidation, DataTransformation, ModelTrainer, ModelEvaluation, ModelPusher: Components responsible for different stages of the pipeline.</span>
<span class="sd">    - Other dependencies: os, sys, uuid, datetime, Thread, pandas, logging.</span>

<span class="sd">Attributes:</span>
<span class="sd">    - experiment: Class attribute representing an instance of the Experiment class with 11 parameters initialized to None.</span>
<span class="sd">    - experiment_file_path: Class attribute representing the path to the experiment file, initially set to None.</span>

<span class="sd">Configuration Setup:</span>
<span class="sd">    - Initializes the ConfigurationManager with the specified configuration file path.</span>
<span class="sd">    - Retrieves configurations for data ingestion, validation, transformation, model training, evaluation, and pushing.</span>

<span class="sd">Pipeline Stages:</span>
<span class="sd">    1. Data Ingestion: Initializes and executes the data ingestion component.</span>
<span class="sd">    2. Data Validation: Initializes and executes the data validation component.</span>
<span class="sd">    3. Data Transformation: Initializes and executes the data transformation component.</span>
<span class="sd">    4. Model Training: Initializes and executes the model training component.</span>
<span class="sd">    5. Model Evaluation: Initializes and executes the model evaluation component.</span>
<span class="sd">    6. Model Pushing: Initializes and executes the model pushing component.</span>

<span class="sd">Experiment Recording:</span>
<span class="sd">    - Creates an instance of the Experiment class to record experiment details.</span>
<span class="sd">    - Saves experiment details to a CSV file.</span>

<span class="sd">Experiment Retrieval:</span>
<span class="sd">    - Provides a method (get_experiment_status) to retrieve experiment status data.</span>

<span class="sd">Note: This module is meant to be executed directly (__name__ == &quot;__main__&quot;) to run the training pipeline.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">fraudDetection.components</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">DataIngestion</span><span class="p">,</span>
    <span class="n">DataValidation</span><span class="p">,</span>
    <span class="n">DataTransformation</span><span class="p">,</span>
    <span class="n">ModelTrainer</span><span class="p">,</span>
    <span class="n">ModelEvaluation</span><span class="p">,</span>
    <span class="n">ModelPusher</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">fraudDetection.config.configuration</span> <span class="kn">import</span> <span class="n">ConfigurationManager</span><span class="p">,</span> <span class="n">CONFIG_FILE_PATH</span>
<span class="kn">from</span> <span class="nn">fraudDetection.constants</span> <span class="kn">import</span> <span class="n">EXPERIMENT_FILE_NAME</span><span class="p">,</span> <span class="n">EXPERIMENT_DIR_NAME</span>
<span class="kn">from</span> <span class="nn">fraudDetection.entity</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">DataIngestionArtifact</span><span class="p">,</span>
    <span class="n">ModelEvaluationArtifact</span><span class="p">,</span>
    <span class="n">DataTransformationArtifact</span><span class="p">,</span>
    <span class="n">ModelTrainerArtifact</span><span class="p">,</span>
    <span class="n">DataValidationArtifact</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">fraudDetection.entity</span> <span class="kn">import</span> <span class="n">Experiment</span>
<span class="kn">from</span> <span class="nn">fraudDetection.exception</span> <span class="kn">import</span> <span class="n">FraudDetectionException</span>
<span class="kn">from</span> <span class="nn">fraudDetection.logger</span> <span class="kn">import</span> <span class="n">logging</span>
<span class="kn">from</span> <span class="nn">fraudDetection.utils</span> <span class="kn">import</span> <span class="n">create_directories</span>


<div class="viewcode-block" id="Pipeline">
<a class="viewcode-back" href="../../../fraudDetection.pipeline.html#fraudDetection.pipeline.pipeline.Pipeline">[docs]</a>
<span class="k">class</span> <span class="nc">Pipeline</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This class initiates a new pipeline as a threaded experiment.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        experiment (Experiment): An instance of the Experiment class with 11 parameters initialized to None.</span>
<span class="sd">        experiment_file_path (str): Path to the experiment file, initially set to None.</span>

<span class="sd">    Args:</span>
<span class="sd">        Thread (class): The standard Python class used as the superclass for threading.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">experiment</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="o">*</span><span class="p">([</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="mi">11</span><span class="p">))</span>
    <span class="n">experiment_file_path</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">ConfigurationManager</span><span class="p">(</span><span class="n">CONFIG_FILE_PATH</span><span class="p">)):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;intialize the obj with object CongigurationManager</span>
<span class="sd">        Args:</span>
<span class="sd">            config (obj:&#39;ConfigurationManager&#39;): contains the path for dirs of artifacts</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">artifact_dir</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">training_pipeline_config</span><span class="o">.</span><span class="n">artifacts_root</span>
            <span class="n">create_directories</span><span class="p">([</span><span class="n">artifact_dir</span><span class="p">])</span>
            <span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">artifact_dir</span><span class="p">,</span> <span class="n">EXPERIMENT_DIR_NAME</span><span class="p">,</span> <span class="n">EXPERIMENT_FILE_NAME</span>
            <span class="p">)</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;pipeline&quot;</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FraudDetectionException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">sys</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

<div class="viewcode-block" id="Pipeline.start_data_ingestion">
<a class="viewcode-back" href="../../../fraudDetection.pipeline.html#fraudDetection.pipeline.pipeline.Pipeline.start_data_ingestion">[docs]</a>
    <span class="k">def</span> <span class="nf">start_data_ingestion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataIngestionArtifact</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates directory&#39;s for data ingestion in to the artifacts</span>
<span class="sd">        Returns:</span>
<span class="sd">            DataIngestionArtifact: An instance of the DataIngestionArtifact class representing the data ingestion process.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data_ingestion</span> <span class="o">=</span> <span class="n">DataIngestion</span><span class="p">(</span>
                <span class="n">data_ingestion_config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_data_ingestion_config</span><span class="p">()</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="n">data_ingestion</span><span class="o">.</span><span class="n">initiate_data_ingestion</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FraudDetectionException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">sys</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></div>


<div class="viewcode-block" id="Pipeline.start_data_validation">
<a class="viewcode-back" href="../../../fraudDetection.pipeline.html#fraudDetection.pipeline.pipeline.Pipeline.start_data_validation">[docs]</a>
    <span class="k">def</span> <span class="nf">start_data_validation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">data_ingestion_artifact</span><span class="o">=</span><span class="n">DataIngestionArtifact</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataValidationArtifact</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates directory&#39;s for data  validation reports artifacts</span>
<span class="sd">        Args:</span>
<span class="sd">            data_ingestion_artifact (obj:&#39;DataIngestionArtifact&#39;): reference to train test csv file</span>
<span class="sd">        Returns:</span>
<span class="sd">            DataValidationArtifact: An instance of the DataValidationArtifact class representing the data validation process.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data_validation</span> <span class="o">=</span> <span class="n">DataValidation</span><span class="p">(</span>
                <span class="n">data_validation_config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_data_validation_config</span><span class="p">(),</span>
                <span class="n">data_ingestion_artifact</span><span class="o">=</span><span class="n">data_ingestion_artifact</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="n">data_validation</span><span class="o">.</span><span class="n">initiate_data_validation</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FraudDetectionException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">sys</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></div>


<div class="viewcode-block" id="Pipeline.start_data_transformation">
<a class="viewcode-back" href="../../../fraudDetection.pipeline.html#fraudDetection.pipeline.pipeline.Pipeline.start_data_transformation">[docs]</a>
    <span class="k">def</span> <span class="nf">start_data_transformation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data_ingestion_artifact</span><span class="p">:</span> <span class="n">DataIngestionArtifact</span><span class="p">,</span>
        <span class="n">data_validation_artifact</span><span class="p">:</span> <span class="n">DataValidationArtifact</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates directory&#39;s for data transformation artifacts</span>
<span class="sd">        Args:</span>
<span class="sd">            data_ingestion_artifact (obj:&#39;DataIngestionArtifact&#39;): reference to train test csv files</span>
<span class="sd">            data_validation_artifact (obj:&#39;DataValidationArtifact&#39;): reference to reports in directory</span>
<span class="sd">        Returns:</span>
<span class="sd">           DataTransformationArtifact: An instance of DataTransformationArtifact class representing the data transformation process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data_transformation</span> <span class="o">=</span> <span class="n">DataTransformation</span><span class="p">(</span>
                <span class="n">data_transformation_config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_data_transformation_config</span><span class="p">(),</span>
                <span class="n">data_ingestion_artifact</span><span class="o">=</span><span class="n">data_ingestion_artifact</span><span class="p">,</span>
                <span class="n">data_validation_artifact</span><span class="o">=</span><span class="n">data_validation_artifact</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="n">data_transformation</span><span class="o">.</span><span class="n">initiate_data_transformation</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FraudDetectionException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">sys</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></div>


<div class="viewcode-block" id="Pipeline.start_model_trainer">
<a class="viewcode-back" href="../../../fraudDetection.pipeline.html#fraudDetection.pipeline.pipeline.Pipeline.start_model_trainer">[docs]</a>
    <span class="k">def</span> <span class="nf">start_model_trainer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">data_transformation_artifact</span><span class="p">:</span> <span class="n">DataTransformationArtifact</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates directory&#39;s for Model trainer artifacts</span>
<span class="sd">        Args:</span>
<span class="sd">            data_transformation_artifact (obj:&#39;DataTransformationArtifact&#39;): reference to ransformed data artifact path</span>
<span class="sd">        Returns:</span>
<span class="sd">            ModelTrainerArtifact: An instance of ModelTrainerArtifact class representing  the model trainer process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">model_trainer</span> <span class="o">=</span> <span class="n">ModelTrainer</span><span class="p">(</span>
                <span class="n">model_trainer_config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_model_trainer_config</span><span class="p">(),</span>
                <span class="n">data_transformation_artifact</span><span class="o">=</span><span class="n">data_transformation_artifact</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">model_trainer</span><span class="o">.</span><span class="n">initiate_model_trainer</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FraudDetectionException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">sys</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></div>


<div class="viewcode-block" id="Pipeline.start_model_evaluation">
<a class="viewcode-back" href="../../../fraudDetection.pipeline.html#fraudDetection.pipeline.pipeline.Pipeline.start_model_evaluation">[docs]</a>
    <span class="k">def</span> <span class="nf">start_model_evaluation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data_ingestion_artifact</span><span class="p">:</span> <span class="n">DataIngestionArtifact</span><span class="p">,</span>
        <span class="n">data_validation_artifact</span><span class="p">:</span> <span class="n">DataValidationArtifact</span><span class="p">,</span>
        <span class="n">data_transformation_artifact</span><span class="p">:</span> <span class="n">DataTransformationArtifact</span><span class="p">,</span>
        <span class="n">model_trainer_artifact</span><span class="p">:</span> <span class="n">ModelTrainerArtifact</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates directory&#39;s for Model evaluation artifacts</span>
<span class="sd">        Args:</span>
<span class="sd">            data_ingestion_artifact (obj:&#39;DataIngestionArtifact&#39;): reference to train test csv files</span>
<span class="sd">            data_validation_artifact (obj:&#39;DataValidationArtifact&#39;): reference to reports in directory</span>
<span class="sd">            data_transformation_artifact (obj:&#39;DataTransformationArtifact&#39;): reference to ransformed data artifact path</span>
<span class="sd">            model_trainer (obj:&#39;ModelTrainer&#39;): Reference to the paths created for  the Trained model artifacts</span>
<span class="sd">        Returns:</span>
<span class="sd">            ModelEvaluationArtifact: An instance of ModelTrainerArtifact representing the model evaluation process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">model_evaluation</span> <span class="o">=</span> <span class="n">ModelEvaluation</span><span class="p">(</span>
                <span class="n">model_evaluation_config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_model_evaluation_config</span><span class="p">(),</span>
                <span class="n">data_ingestion_artifact</span><span class="o">=</span><span class="n">data_ingestion_artifact</span><span class="p">,</span>
                <span class="n">data_validation_artifact</span><span class="o">=</span><span class="n">data_validation_artifact</span><span class="p">,</span>
                <span class="n">model_trainer_artifact</span><span class="o">=</span><span class="n">model_trainer_artifact</span><span class="p">,</span>
                <span class="n">data_transformation_artifact</span><span class="o">=</span><span class="n">data_transformation_artifact</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="n">model_evaluation</span><span class="o">.</span><span class="n">initiate_model_evaluation</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FraudDetectionException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">sys</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></div>


<div class="viewcode-block" id="Pipeline.start_model_pusher">
<a class="viewcode-back" href="../../../fraudDetection.pipeline.html#fraudDetection.pipeline.pipeline.Pipeline.start_model_pusher">[docs]</a>
    <span class="k">def</span> <span class="nf">start_model_pusher</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_eval_artifact</span><span class="p">:</span> <span class="n">ModelEvaluationArtifact</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create directory for Model pusher artifacts</span>
<span class="sd">        Args:</span>
<span class="sd">            model_eval_artifacts (obj:&#39;ModelEvaluationArtifact&#39;): reference to model evalution paths</span>
<span class="sd">        Returns:</span>
<span class="sd">            ModelPusherArtifacts: An instance of ModelPusherArtifacts representing the model pusher process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">model_pusher</span> <span class="o">=</span> <span class="n">ModelPusher</span><span class="p">(</span>
                <span class="n">model_pusher_config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_model_pusher_config</span><span class="p">(),</span>
                <span class="n">model_evaluation_artifact</span><span class="o">=</span><span class="n">model_eval_artifact</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="n">model_pusher</span><span class="o">.</span><span class="n">initiate_model_pusher</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FraudDetectionException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">sys</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></div>


<div class="viewcode-block" id="Pipeline.run_pipeline">
<a class="viewcode-back" href="../../../fraudDetection.pipeline.html#fraudDetection.pipeline.pipeline.Pipeline.run_pipeline">[docs]</a>
    <span class="k">def</span> <span class="nf">run_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run pipeline creating a new instance of experiment a process of training and evaluting models&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">running_status</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Pipeline is already running&quot;</span><span class="p">)</span>

            <span class="c1"># data ingestion</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Pipeline starting&quot;</span><span class="p">)</span>

            <span class="n">experiment_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

            <span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span>
                <span class="n">experiment_id</span><span class="o">=</span><span class="n">experiment_id</span><span class="p">,</span>
                <span class="n">initialization_timestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">current_time_stamp</span><span class="p">,</span>
                <span class="n">artifact_timestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">current_time_stamp</span><span class="p">,</span>
                <span class="n">running_status</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">start_time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
                <span class="n">stop_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">execution_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">experiment_file_path</span><span class="o">=</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment_file_path</span><span class="p">,</span>
                <span class="n">is_model_accepted</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Pipe has been started&quot;</span><span class="p">,</span>
                <span class="n">accuracy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline experiment: </span><span class="si">{</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">save_experiment</span><span class="p">()</span>
            <span class="n">data_ingestion_artifact</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_data_ingestion</span><span class="p">()</span>

            <span class="n">data_validation_artifact</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_data_validation</span><span class="p">(</span>
                <span class="n">data_ingestion_artifact</span><span class="o">=</span><span class="n">data_ingestion_artifact</span>
            <span class="p">)</span>

            <span class="n">data_transformation_artifact</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_data_transformation</span><span class="p">(</span>
                <span class="n">data_ingestion_artifact</span><span class="o">=</span><span class="n">data_ingestion_artifact</span><span class="p">,</span>
                <span class="n">data_validation_artifact</span><span class="o">=</span><span class="n">data_validation_artifact</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">model_trainer_artifact</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_model_trainer</span><span class="p">(</span>
                <span class="n">data_transformation_artifact</span><span class="o">=</span><span class="n">data_transformation_artifact</span>
            <span class="p">)</span>

            <span class="n">model_evaluator_artifact</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_model_evaluation</span><span class="p">(</span>
                <span class="n">data_ingestion_artifact</span><span class="o">=</span><span class="n">data_ingestion_artifact</span><span class="p">,</span>
                <span class="n">data_validation_artifact</span><span class="o">=</span><span class="n">data_validation_artifact</span><span class="p">,</span>
                <span class="n">data_transformation_artifact</span><span class="o">=</span><span class="n">data_transformation_artifact</span><span class="p">,</span>
                <span class="n">model_trainer_artifact</span><span class="o">=</span><span class="n">model_trainer_artifact</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># if model_evaluator_artifact.is_model_accepted:</span>
            <span class="n">model_pusher_artifact</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_model_pusher</span><span class="p">(</span>
                <span class="n">model_eval_artifact</span><span class="o">=</span><span class="n">model_evaluator_artifact</span>
            <span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Model pusher artifact: </span><span class="si">{</span><span class="n">model_pusher_artifact</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="c1"># else:</span>
            <span class="c1">#     logging.info(&quot;Trained model rejected&quot;)</span>

            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Pipline completed&quot;</span><span class="p">)</span>

            <span class="n">stop_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

            <span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span>
                <span class="n">experiment_id</span><span class="o">=</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">experiment_id</span><span class="p">,</span>
                <span class="n">initialization_timestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">current_time_stamp</span><span class="p">,</span>
                <span class="n">artifact_timestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">current_time_stamp</span><span class="p">,</span>
                <span class="n">running_status</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">start_time</span><span class="o">=</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span>
                <span class="n">stop_time</span><span class="o">=</span><span class="n">stop_time</span><span class="p">,</span>
                <span class="n">execution_time</span><span class="o">=</span><span class="n">stop_time</span> <span class="o">-</span> <span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Pipeline has been completed&quot;</span><span class="p">,</span>
                <span class="n">experiment_file_path</span><span class="o">=</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment_file_path</span><span class="p">,</span>
                <span class="n">is_model_accepted</span><span class="o">=</span><span class="n">model_evaluator_artifact</span><span class="o">.</span><span class="n">is_model_accepted</span><span class="p">,</span>
                <span class="n">accuracy</span><span class="o">=</span><span class="n">model_trainer_artifact</span><span class="o">.</span><span class="n">model_accuracy</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline experiment:</span><span class="si">{</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_experiment</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FraudDetectionException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">sys</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></div>


<div class="viewcode-block" id="Pipeline.run">
<a class="viewcode-back" href="../../../fraudDetection.pipeline.html#fraudDetection.pipeline.pipeline.Pipeline.run">[docs]</a>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the pipeline of training and testing models&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">run_pipeline</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FraudDetectionException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">sys</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></div>


<div class="viewcode-block" id="Pipeline.save_experiment">
<a class="viewcode-back" href="../../../fraudDetection.pipeline.html#fraudDetection.pipeline.pipeline.Pipeline.save_experiment">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">save_experiment</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the experiments attributes in a csv file record&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">experiment_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">experiment</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment</span>
                <span class="n">experiment_dict</span> <span class="o">=</span> <span class="n">experiment</span><span class="o">.</span><span class="vm">__dict__</span>
                <span class="n">experiment_dict</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">key</span><span class="p">:</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">experiment_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="p">}</span>

                <span class="n">experiment_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;create_time_stamp&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()],</span>
                        <span class="s2">&quot;experiment_file_path&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment_file_path</span><span class="p">)</span>
                        <span class="p">],</span>
                    <span class="p">}</span>
                <span class="p">)</span>

                <span class="n">experiment_report</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">experiment_dict</span><span class="p">)</span>

                <span class="n">create_directories</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment_file_path</span><span class="p">)])</span>

                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment_file_path</span><span class="p">):</span>
                    <span class="n">experiment_report</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
                        <span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment_file_path</span><span class="p">,</span>
                        <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment_file_path</span><span class="p">)</span>
                    <span class="n">experiment_report</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
                        <span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment_file_path</span><span class="p">,</span>
                        <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span>
                    <span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;First start experiment&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FraudDetectionException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">sys</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></div>


<div class="viewcode-block" id="Pipeline.get_experiment_status">
<a class="viewcode-back" href="../../../fraudDetection.pipeline.html#fraudDetection.pipeline.pipeline.Pipeline.get_experiment_status">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_experiment_status</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;get status of experiments</span>
<span class="sd">        Returns:</span>
<span class="sd">            DataFrame (obj:&#39;pd.DataFrame&#39;): consist of exepriments of training and testing models conducted so far</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment_file_path</span><span class="p">):</span>
                <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">experiment_file_path</span><span class="p">)</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="n">limit</span><span class="p">:]</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
                    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;experiment_file_path&quot;</span><span class="p">,</span> <span class="s2">&quot;initialization_timestamp&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FraudDetectionException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">sys</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Arun khare.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>